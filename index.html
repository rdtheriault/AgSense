<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	</head>
	<body>
		Hello World
		<div id="temp"></div>
		<div id="hum"></div>
		<select id="rain">
		<option value="wm">Watermelon</option>
		<option value="corn">Corn</option>
		<option value="wh">Wheat</option>
		<option value="pt">Potato</option>
		</select>
		<div id="temp2"></div>
		<div id="hum2"></div>





		<script>

			var wm = [90,70,60,40];
			var corn = [0, 1, 2, 3];
			var wh = [0, 1, 2, 3];
			var pt = [1, 2, 4, 6];
			var holder;
			var high;
			var low;
			var wet;
			var dry;
			var extObj;
			// info.json
			getJson();

			function getJson() {


				var xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange = function()  {
				  if (this.readyState == 4 && this.status == 200) {
				    extObj =  JSON.parse(this.responseText);
				    ////put your json processing code here or call a function
				    //document.getElementById("named").innerHTML = extObj.temp;
					process(extObj.temp,extObj.hum);
				  }
				};
				xmlhttp.open("GET", "sense.json", true);
				xmlhttp.send();
			}




			document.getElementById('rain').addEventListener('change', getCrop);




			function getCrop() {
				var crop = document.getElementById('rain').value;
				if (crop == 'wm') {
					holder = wm;
				} else if (crop == 'corn') {
					holder = corn;
				} else if (crop == 'wh') {
					holder = wh;
				} else {
					holder = pt;
				}
				high = holder[0];
				low = holder[1];
				wet = holder[2];
				dry = holder[3];
				getJson();

			}
			


			function process(temp,hum){
				var temp2 = conv(temp);
				if (temp2>high){
					document.getElementById("temp").style.background = "red";
					document.getElementById("temp").innerHTML = temp2;
				}
				else if (temp2<low){
					document.getElementById("temp").style.background = "blue";
					document.getElementById("temp").innerHTML = temp2;
				}
				else {
					document.getElementById("temp").style.background = "green";
					document.getElementById("temp").innerHTML = temp2;
				}

			}
			function conv(temp){
				var newer = (temp*9/5)+32
				return newer;
			}



			function getJson() {
				var xmlhttp = new XMLHttpRequest();
				xmlhttp.onreadystatechange = function()  {
				  if (this.readyState == 4 && this.status == 200) {
				    extObj =  JSON.parse(this.responseText);
				    ////put your json processing code here or call a function
					var tempHolder = extObj.main.temp;
					var temp = tempHolder * 9/5  - 459.67
				    document.getElementById("temp2").innerHTML = temp;
					//T(K) Ã— 9/5 - 459.67
					document.getElementById("hum2").innerHTML = extObj.main.humidity;
				  }
				};
				xmlhttp.open("GET", "http://api.openweathermap.org/data/2.5/weather?zip=97838,us&APPID=304801c51fcd1b780fa5eca5256b7db9", true);
				xmlhttp.send();
			}
			getJson();






		</script>

	</body>
</html>
